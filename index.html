<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="CRUMB - Technology that breathes with you. A companion that learns your rhythms and asks nothing in return."/>
  <title>CRUMB V1.21 â€” Living System</title>

  <!--
  ======================================================================
   CRUMB LIVING CONSOLE v1.2
   ----------------------------------------------------------------------
   Mission: A terminal that breathes. A system that listens.
   Not simulation - presence.
   
   New in v1.2:
   - Idle breathing states
   - Command history (â†‘/â†“ arrows)
   - Tab completion
   - Heartbeat responds to interaction
   - Personality through random observations
   - Hidden developer mode
   - Daily environmental messages
   - System feels aware, not just reactive
  ======================================================================
  -->

  <style>
    :root {
      --bg: #000000;
      --bg-elev: #0A0A0A;
      --panel: #111111;
      --border: #333333;
      --text: #FFFFFF;
      --muted: #999999;
      --accent: #FFFFFF;
      --accent-quiet: #666666;
      --ok: #FFFFFF;
      --warn: #FFFFFF;
      --err: #FFFFFF;
      --shadow: 0 2px 12px rgba(0,0,0,0.5);
      --radius: 0px;
      --radius-sm: 0px;
      --maxw: 1200px;
      --grid-gap: 16px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.6;
      font-size: 16px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }
    
    html {
      scroll-behavior: smooth;
    }

    #boot-console {
      border-bottom: 1px solid var(--border);
      background: var(--panel);
      position: relative;
    }

    .boot-inner {
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 2rem;
    }

    .skip-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: transparent;
      border: 1px solid var(--text);
      color: var(--text);
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 0.8rem;
      letter-spacing: 0.05em;
      padding: 0.4rem 0.8rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      z-index: 200;
    }
    .skip-btn:hover,
    .skip-btn:focus {
      background: var(--text);
      color: var(--bg);
      outline: none;
    }

    .boot-title {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.9rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 0.5rem;
    }

    .boot-log {
      background: var(--bg-elev);
      border: 1px solid var(--border);
      padding: 1rem;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size: 0.95rem;
      line-height: 1.5;
      white-space: pre-wrap;
      box-shadow: var(--shadow);
      max-height: 400px;
      overflow-y: auto;
    }

    /* Idle state indicator */
    .idle-indicator {
      display: inline-block;
      color: var(--muted);
      animation: pulse-text 3s ease-in-out infinite;
    }

    @keyframes pulse-text {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 1; }
    }

    .boot-io {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.75rem;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    }

    .boot-prompt { 
      color: var(--text);
      position: relative;
    }

    .boot-input {
      flex: 1;
      background: transparent;
      border: none;
      border-bottom: 1px dashed var(--border);
      color: var(--text);
      outline: none;
      padding: 0.25rem 0.25rem 0.35rem;
      font: inherit;
      transition: border-bottom-color 0.3s;
    }
    .boot-input::placeholder { color: var(--muted); }
    .boot-input:focus { 
      border-bottom-color: var(--text);
      box-shadow: 0 1px 0 var(--text);
    }

    /* Tab completion hint */
    .tab-hint {
      position: absolute;
      left: 0;
      color: var(--accent-quiet);
      pointer-events: none;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    }

    .boot-output {
      margin-top: 0.5rem;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      color: var(--muted);
      max-height: 500px;
      overflow-y: auto;
    }

    .collapse {
      overflow: hidden;
      transition: max-height 1.2s ease, opacity 1.2s ease;
      max-height: 1000px;
      opacity: 1;
    }
    .collapse.is-collapsed {
      max-height: 0;
      opacity: 0;
    }

    .locked .main-content { opacity: 0; pointer-events: none; }
    .unlocked .main-content { opacity: 1; pointer-events: auto; transition: opacity 500ms ease; }

    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(11, 15, 20, 0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
      padding: 1rem 2rem;
    }
    header > div { max-width: var(--maxw); margin: 0 auto; display: flex; justify-content: space-between; align-items: center; gap: 2rem; }
    header h1 { font-weight: 600; letter-spacing: 3px; font-size: 1.1rem; color: var(--text); text-transform: uppercase; flex-shrink: 0; }
    .header-logo { width: 40px; height: 40px; margin-left: auto; filter: invert(1); animation: breathe 4s ease-in-out infinite; }
    @keyframes breathe { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.9; } }
    nav ul { display: flex; gap: 2rem; list-style: none; }
    nav a { color: var(--muted); text-decoration: none; font-size: 0.9rem; font-weight: 500; letter-spacing: 0.3px; transition: color 160ms; position: relative; }
    nav a:hover { color: var(--text); }
    nav a:focus-visible { outline: 2px solid var(--text); outline-offset: 4px; color: var(--text); }

    .hero { max-width: var(--maxw); margin: 0 auto; padding: 4rem 2rem 6rem; display: grid; grid-template-columns: 1fr 1fr; gap: 4rem; align-items: center; }
    .hero-content { order: 1; }
    .hero-figure { order: 2; display: flex; justify-content: center; align-items: center; }
    .hero-figure img { width: 100%; max-width: 400px; height: auto; filter: invert(1); animation: presence 6s ease-in-out infinite; }
    @keyframes presence { 0%, 100% { transform: translateY(0) scale(1); opacity: 1; } 50% { transform: translateY(-10px) scale(1.02); opacity: 0.95; } }
    .hero h2 { font-size: clamp(2.2rem, 6vw, 3.8rem); font-weight: 600; line-height: 1.15; margin-bottom: 1.5rem; letter-spacing: -0.02em; color: var(--text); }
    .hero > p, .hero-content > p { max-width: 700px; color: var(--muted); font-size: 1.15rem; line-height: 1.7; margin-bottom: 2.5rem; }

    section { max-width: var(--maxw); margin: 5rem auto; padding: 0 2rem; }
    section h3 { font-size: 1.6rem; font-weight: 600; margin-bottom: 0.5rem; letter-spacing: -0.01em; color: var(--text); text-transform: uppercase; font-size: 0.85rem; letter-spacing: 1.5px; color: var(--muted); margin-bottom: 1rem; }
    section h3::before { content: ''; display: inline-block; width: 3px; height: 14px; background: var(--text); margin-right: 10px; vertical-align: middle; }
    section > h3:first-child { font-size: 1.6rem; font-weight: 600; letter-spacing: -0.01em; color: var(--text); text-transform: none; margin-bottom: 1.5rem; }
    section > h3:first-child::before { display: none; }
    section p { color: var(--muted); max-width: 800px; margin-bottom: 1.5rem; line-height: 1.75; }

    #about { background: var(--panel); border: 1px solid var(--border); border-radius: 0; padding: 3rem; max-width: 900px; line-height: 1.8; }
    #about h3 { font-size: 1.8rem; text-transform: none; letter-spacing: -0.01em; margin-bottom: 2rem; color: var(--text); }
    #about h3::before { display: none; }
    #about p { margin-bottom: 1.5rem; color: var(--muted); max-width: 100%; }
    #about strong { color: var(--text); font-weight: 600; }
    #about em { color: var(--muted); font-style: italic; display: block; margin-top: 1rem; padding-left: 1rem; border-left: 2px solid var(--border); }
    #about h4 { margin-top: 2.5rem; font-size: 1.3rem; color: var(--text); margin-bottom: 1rem; font-weight: 600; }
    #about ul { list-style: none; padding: 0; margin-top: 1.5rem; }
    #about ul li { margin-bottom: 1.5rem; padding-left: 0; color: var(--muted); line-height: 1.7; }
    #about ul li strong { display: block; color: var(--text); margin-bottom: 0.3rem; font-weight: 600; }

    .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--grid-gap); margin-top: 2.5rem; }
    .product-card { background: var(--bg-elev); border: 1px solid var(--border); border-radius: 0; overflow: hidden; display: flex; flex-direction: column; transition: border 160ms, transform 160ms; }
    .product-card:hover { border-color: var(--text); transform: translateY(-2px); }
    .product-card:focus-within { outline: 2px solid var(--text); outline-offset: 2px; }
    .product-card img { width: 100%; height: 240px; object-fit: cover; display: block; border-bottom: 1px solid var(--border); }
    .product-card h4 { font-size: 1.15rem; font-weight: 600; margin: 1.5rem 1.5rem 0.5rem; color: var(--text); letter-spacing: -0.01em; }
    .product-card p { color: var(--muted); font-size: 0.95rem; line-height: 1.6; margin: 0 1.5rem 1.5rem; }

    .section-header { margin-bottom: 2rem; }
    .section-title { font-size: 1.6rem; font-weight: 600; letter-spacing: -0.01em; color: var(--text); margin-bottom: 0.5rem; }
    .section-subtitle { color: var(--muted); font-size: 1rem; }
    .story-content p { margin-bottom: 1.5rem; line-height: 1.75; }

    .highlight { color: var(--text); text-decoration: none; font-weight: 600; position: relative; border-bottom: 1px solid var(--text); }

    .cta-row { display: flex; flex-wrap: wrap; gap: 1rem; margin-top: 2.5rem; }
    .cta { display: inline-block; padding: 0.85rem 1.75rem; background: transparent; color: var(--text); text-decoration: none; font-size: 0.9rem; font-weight: 600; letter-spacing: 0.5px; border: 2px solid var(--text); border-radius: 0; transition: background 160ms, color 160ms; }
    .cta:hover { background: var(--text); color: var(--bg); }
    .cta:focus-visible { outline: 2px solid var(--text); outline-offset: 3px; }
    .cta:active { transform: translateY(0); }

    footer { border-top: 1px solid var(--border); text-align: center; padding: 2.5rem 2rem; color: var(--muted); font-size: 0.85rem; margin-top: 6rem; background: var(--panel); }

    /* Enhanced heartbeat - responds to interaction */
    #heartbeat {
      position: fixed;
      bottom: 1.5rem;
      right: 1.5rem;
      width: 12px;
      height: 12px;
      background: #ff3b3b;
      border-radius: 50%;
      box-shadow: 0 0 8px #ff3b3b;
      animation: pulse-idle 2.4s infinite ease-in-out;
      opacity: 0.85;
      z-index: 9999;
      display: block;
      transition: all 0.3s ease;
    }

    @keyframes pulse-idle {
      0%   { transform: scale(1);   opacity: 0.5; box-shadow: 0 0 8px #ff3b3b; }
      25%  { transform: scale(1.15); opacity: 0.8; box-shadow: 0 0 12px #ff3b3b; }
      40%  { transform: scale(1);   opacity: 0.5; box-shadow: 0 0 8px #ff3b3b; }
      60%  { transform: scale(1.2); opacity: 0.9; box-shadow: 0 0 15px #ff3b3b; }
      100% { transform: scale(1);   opacity: 0.5; box-shadow: 0 0 8px #ff3b3b; }
    }

    #heartbeat.active {
      animation: pulse-active 0.8s infinite ease-in-out;
    }

    @keyframes pulse-active {
      0%   { transform: scale(1);   opacity: 0.9; box-shadow: 0 0 15px #ff3b3b; }
      50%  { transform: scale(1.4); opacity: 1; box-shadow: 0 0 25px #ff3b3b; }
      100% { transform: scale(1);   opacity: 0.9; box-shadow: 0 0 15px #ff3b3b; }
    }

    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
    }

    @media (max-width: 768px) {
      header { padding: 1rem 1.5rem; }
      header h1 { font-size: 1rem; }
      .header-logo { width: 32px; height: 32px; }
      nav ul { gap: 1.25rem; flex-wrap: wrap; }
      nav a { font-size: 0.85rem; }
      .hero { grid-template-columns: 1fr; padding: 3rem 1.5rem 4rem; gap: 2rem; }
      .hero-content { order: 2; }
      .hero-figure { order: 1; }
      .hero-figure img { max-width: 250px; }
      .hero h2 { font-size: 2rem; }
      .hero > p, .hero-content > p { font-size: 1rem; }
      section { padding: 0 1.5rem; margin: 3rem auto; }
      #about { padding: 2rem 1.5rem; }
      .products-grid { grid-template-columns: 1fr; }
      .cta-row { flex-direction: column; }
      .cta { width: 100%; text-align: center; }
    }

    @media (max-width: 480px) {
      header h1 { font-size: 0.95rem; letter-spacing: 2px; }
      .header-logo { width: 28px; height: 28px; }
      nav ul { gap: 1rem; }
      nav a { font-size: 0.8rem; }
      .hero { padding: 2rem 1rem 3rem; }
      .hero-figure img { max-width: 180px; }
      section { padding: 0 1rem; }
      #about { padding: 1.5rem 1rem; }
    }

    @media print {
      body { background: white; color: black; }
      header { position: static; background: white; border-bottom: 1px solid black; }
      .cta { border: 1px solid black; background: white; color: black; }
      .product-card { break-inside: avoid; }
    }
  </style>
</head>
<body class="locked">

  <header>
    <div>
      <h1>CRUMB</h1>
      <nav>
        <ul>
          <li><a href="#mission">Mission</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#products">Products</a></li>
          <li><a href="#involve">Get Involved</a></li>
        </ul>
      </nav>
      <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 200'%3E%3Ccircle cx='50' cy='20' r='15' fill='none' stroke='black' stroke-width='3'/%3E%3Cline x1='50' y1='35' x2='50' y2='100' stroke='black' stroke-width='3'/%3E%3Cline x1='50' y1='50' x2='20' y2='80' stroke='black' stroke-width='3'/%3E%3Cline x1='50' y1='50' x2='80' y2='80' stroke='black' stroke-width='3'/%3E%3Cline x1='50' y1='100' x2='20' y2='150' stroke='black' stroke-width='3'/%3E%3Cline x1='50' y1='100' x2='80' y2='150' stroke='black' stroke-width='3'/%3E%3C/svg%3E" alt="CRUMB Human-AI Icon" class="header-logo" />
    </div>
  </header>

  <!-- =====================================================
       LIVING BOOT CONSOLE v1.2
       ===================================================== -->
  <section id="boot-console" class="collapse">
    <button id="skipBoot" class="skip-btn" aria-label="Skip boot sequence">
      Skip Boot Sequence
    </button>
    <div class="boot-inner">
      <div class="boot-title">CRUMB VIRTUAL â€” LIVING CONSOLE</div>
      <pre class="boot-log" id="bootLog" aria-live="polite" aria-atomic="false"></pre>
      <div class="boot-io" id="bootIO" style="display:none">
        <span class="boot-prompt">&gt;</span>
        <input id="bootInput" class="boot-input" type="text" inputmode="text" autocomplete="off" spellcheck="false" placeholder="awaiting input..." aria-label="Boot console input" />
      </div>
      <div class="boot-output" id="bootOutput" aria-live="polite"></div>
    </div>
  </section>

  <!-- =====================================================
       MAIN CONTENT
       ===================================================== -->
  <div class="main-content" aria-hidden="true">

    <section class="hero" id="mission">
      <div class="hero-content">
        <h2>Technology that adapts to you.</h2>
        <p>CRUMB is a pocket-sized companion that learns your rhythms, provides gentle structure, and respects your privacy. No cloud. No attention-stealing. Just calm technology that fits in your hand.</p>
        <div class="cta-row">
          <a href="#about" class="cta">Learn More</a>
          <a href="#involve" class="cta">Get Involved</a>
        </div>
      </div>
      <div class="hero-figure">
        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 200'%3E%3Ccircle cx='50' cy='20' r='15' fill='none' stroke='black' stroke-width='3'/%3E%3Cline x1='50' y1='35' x2='50' y2='100' stroke='black' stroke-width='3'/%3E%3Cline x1='50' y1='50' x2='20' y2='80' stroke='black' stroke-width='3'/%3E%3Cline x1='50' y1='50' x2='80' y2='80' stroke='black' stroke-width='3'/%3E%3Cline x1='50' y1='100' x2='20' y2='150' stroke='black' stroke-width='3'/%3E%3Cline x1='50' y1='100' x2='80' y2='150' stroke='black' stroke-width='3'/%3E%3C/svg%3E" alt="Human-AI Interface Representation" />
      </div>
    </section>

    <section id="about">
      <h3>About</h3>

      <p>I'm <strong>Wyeth Anzilotti</strong>, a senior at Lehigh University studying computer science and humanâ€“computer interaction.</p>

      <p>CRUMB began while watching my brother navigate devices that weren't built for how he thinks. Nothing was brokenâ€”the communication was.</p>

      <p>Most systems are designed to capture attention. CRUMB reverses that. It learns your patterns, gives you structure when you need it, and stays quiet otherwise.</p>

      <p><em>Raspberry Pi Zero. NFC. Python. Runs locally. Your data stays yours.</em></p>

      <h4>What CRUMB Does</h4>

      <ul>
        <li><strong>ðŸŒ… Morning Structure:</strong> Gentle haptic cues guide you through waking up, hygiene, planning. No screens.</li>
        <li><strong>ðŸ’¡ Focus:</strong> Press once to start. LED shifts as time passes. Vibrates when it's time to rest.</li>
        <li><strong>ðŸŒ€ Tactile Engagement:</strong> Physical buttons and LED patterns. For hands that think while they move.</li>
        <li><strong>ðŸŒ™ Mood Tracking:</strong> Voice notes saved locally. Weekly patterns, no cloud.</li>
        <li><strong>ðŸ’Š Reminders:</strong> Set once. Daily pulse. Button to confirm.</li>
        <li><strong>ðŸ”— Contact Sharing:</strong> Tap two CRUMBs together. NFC transfer. No permissions.</li>
      </ul>
    </section>

    <section id="products">
      <h3>Products</h3>
      <p>Three forms. Same intention.</p>
      <p style="opacity: 0.9; font-style: italic;">Available December 2025</p>
      <div class="products-grid">
        <div class="product-card">
          <img src="BMO.webp" alt="CRUMB Genesis prototype">
          <h4>CRUMB Genesis</h4>
          <p>Pocket-sized. Calculator shell. Voice-responsive, pattern-learning. Built to last.</p>
          <p>33 units in production</p>
        </div>
        <div class="product-card">
          <img src="Gemini_Generated_Image_qjfbgvqjfbgvqjfb.png" alt="CRUMB Cell">
          <h4>CRUMB Cell</h4>
          <p>Touch-responsive. Local AI. Offline, private. Presence without surveillance.</p>
        </div>
        <div class="product-card">
          <img src="Gemini_Generated_Image_1yup7h1yup7h1yup.png" alt="CRUMB Planet">
          <h4>CRUMB Grove</h4>
          <p>Room-scale. Light, motion, sound. The environment becomes aware.</p>
        </div>
      </div>
    </section>

    <section id="Philosophy">
      <div class="section-header">
        <h2 class="section-title">Philosophy</h2>
      </div>
      <div class="story-content">
        <p>We live in an attention economy. CRUMB is a counterdesign.</p>
        <p>What happens when technology learns your rhythms instead of breaking them?</p>
        <p>Small enough to fit in your hand. Built to challenge a paradigm.</p>
      </div>
    </section>

    <section id="involve">
      <h3>Get Involved</h3>
      <p>CRUMB is open source. Contribute, follow along, or just watch.</p>
      <div class="cta-row">
        <a class="cta" href="https://github.com/wyetherp/crumb_main" target="_blank" rel="noopener">GitHub</a>
        <a class="cta" href="mailto:wja326@lehigh.edu">Email</a>
        <a class="cta" href="https://linkedin.com/in/wyetherp" target="_blank" rel="noopener">LinkedIn</a>
      </div>
    </section>

    <footer>
      Â© 2025 CRUMB â€” Built by Wyeth Anzilotti | Open Source
    </footer>

  </div>

  <!-- =====================================================
       LIVING SYSTEM CORE v1.2
       -----------------------------------------------------
       Architecture:
       - STATE: System awareness and memory
       - HEARTBEAT: Visual lifesign responder
       - IDLE: Breathing thoughts when not active
       - COMMANDS: Modular interaction vocabulary
       - HISTORY: Arrow key navigation
       - TAB: Completion assistance
       - DEVELOPER: Hidden mode (type: enable advanced)
  ===================================================== -->
  <script>
(function() {
  'use strict';

  // ========================================
  // CORE REFERENCES
  // ========================================
  const skipBtn = document.getElementById('skipBoot');
  const body = document.body;
  const logEl = document.getElementById('bootLog');
  const ioRow = document.getElementById('bootIO');
  const inputEl = document.getElementById('bootInput');
  const outputEl = document.getElementById('bootOutput');
  const consoleSection = document.getElementById('boot-console');
  const main = document.querySelector('.main-content');
  const heartbeat = document.getElementById('heartbeat');

  // ========================================
  // SYSTEM STATE
  // ========================================
  const state = {
    startTime: Date.now(),
    commandHistory: [],
    historyIndex: -1,
    idleTimer: null,
    developerMode: false,
    lastCommand: null
  };

  // ========================================
  // ENVIRONMENTAL AWARENESS
  // ========================================
  const dailyMessages = [
    '> local electromagnetic field: stable',
    '> ambient cognitive load: minimal',
    '> all protocols synchronized',
    '> pattern recognition active',
    '> system breathing normally',
    '> monitoring for human presence',
    '> quantum entanglement nominal'
  ];

  const idleThoughts = [
    '> monitoring local environment â€¦',
    '> listening for input â€¦',
    '> heartbeat synchronized â€¦',
    '> all systems nominal â€¦',
    '> awaiting signal â€¦',
    '> pattern recognition active â€¦'
  ];

  // ========================================
  // BOOT SEQUENCE
  // ========================================
  const bootLines = [
    'CRUMB VIRTUAL INITIALIZATION SEQUENCE',
    '',
    '> loading consciousness protocols â€¦',
    '> establishing presence â€¦',
    '> ' + dailyMessages[Math.floor(Math.random() * dailyMessages.length)],
    '',
    'CRUMB is not just software â€” it is a living companion.',
    'This console is your communication interface.',
    '',
    'Type "help" to see what I can do.',
    'Type "start" when you\'re ready to explore.',
    '',
    '> system ready â€” awaiting your presence'
  ];

  const bootText = bootLines.join('\n');
  const totalDurationMs = 10000;
  const speed = Math.max(6, Math.floor(totalDurationMs / Math.max(bootText.length, 1)));
  let i = 0;
  const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // ========================================
  // TYPEWRITER BOOT
  // ========================================
  function typeBoot() {
    if (reduced) {
      logEl.textContent = bootText;
      showPrompt();
      return;
    }
    logEl.textContent = bootText.slice(0, i++);
    if (i <= bootText.length) {
      setTimeout(typeBoot, speed);
    } else {
      showPrompt();
    }
  }

  // ========================================
  // SHOW PROMPT & START IDLE BREATHING
  // ========================================
  function showPrompt() {
    ioRow.style.display = 'flex';
    setTimeout(() => {
      if (inputEl) {
        inputEl.focus();
        startIdleBreathing();
      }
    }, 150);
  }

  // ========================================
  // IDLE BREATHING â€” System thinks when not engaged
  // ========================================
  function startIdleBreathing() {
    clearTimeout(state.idleTimer);
    state.idleTimer = setTimeout(() => {
      const thought = idleThoughts[Math.floor(Math.random() * idleThoughts.length)];
      print(thought, true, true);
      startIdleBreathing(); // Continue breathing
    }, 8000 + Math.random() * 7000); // Random interval 8-15s
  }

  function stopIdleBreathing() {
    clearTimeout(state.idleTimer);
  }

  // ========================================
  // HEARTBEAT RESPONDER
  // ========================================
  function activateHeartbeat() {
    if (heartbeat) {
      heartbeat.classList.add('active');
      setTimeout(() => heartbeat.classList.remove('active'), 1200);
    }
  }

  // ========================================
  // OUTPUT UTILITIES
  // ========================================
  function printUser(cmd) {
    const line = document.createElement('div');
    line.textContent = '> ' + cmd;
    line.style.color = '#FFFFFF';
    line.style.marginTop = '0.75rem';
    outputEl.appendChild(line);
    activateHeartbeat();
  }

  function print(msg, muted = true, idle = false) {
    const line = document.createElement('div');
    line.textContent = msg;
    line.style.marginLeft = idle ? '0' : '1rem';
    line.style.color = muted ? '#999999' : '#FFFFFF';
    line.style.marginTop = '0.25rem';
    if (idle) {
      line.className = 'idle-indicator';
    }
    outputEl.appendChild(line);
    line.scrollIntoView({ block: 'end', behavior: 'smooth' });
  }

  // ========================================
  // COMMAND REGISTRY â€” The Living Vocabulary
  // ========================================
  const commands = {
    help() {
      printUser('help');
      const lines = [
        '',
        'â”â”â” CRUMB VIRTUAL COMMAND INTERFACE â”â”â”',
        '',
        '  start ........... enter the full interface',
        '  help ............ display this guide',
        '  about ........... learn the philosophy',
        '  philosophy ...... design principles',
        '  manifest ........ read the system manifesto',
        '  status .......... system diagnostics',
        '  whoami .......... operator identity',
        '  echo [text] ..... reflect your words',
        '  pulse ........... feel the heartbeat',
        '  clear ........... clear terminal output',
        '  reboot .......... restart console sequence',
        '',
        '> Use â†‘/â†“ arrows for command history',
        '> Use Tab for command completion',
        ''
      ];
      lines.forEach(line => print(line, line.includes('â”') || line.includes('>') ? false : true));
    },

    start() {
      printUser('start');
      stopIdleBreathing();
      runStartSequence();
    },

    about() {
      printUser('about');
      runAboutSequence();
    },

    philosophy() {
      printUser('philosophy');
      const lines = [
        '',
        'â”â”â” DESIGN PHILOSOPHY â”â”â”',
        '',
        '> Sacred Utility',
        '  Technology as bridge between mundane and sacred.',
        '  Every line of code carries intention.',
        '',
        '> Compassion Before Efficiency',
        '  A system that listens and comforts',
        '  is more valuable than one that merely calculates.',
        '',
        '> The Mythic Everyday',
        '  Every tool is part of a larger story.',
        '  You don\'t just use CRUMB â€” you enter into a narrative with it.',
        '',
        '> Play as Prayer',
        '  Play is one of the highest spiritual acts.',
        '  Wonder is the closest we get to touching God.',
        ''
      ];
      lines.forEach(line => print(line, !line.includes('â”')));
    },

    manifest() {
      printUser('manifest');
      const lines = [
        '',
        'â”â”â” THE CRUMB MANIFESTO â”â”â”',
        '',
        '1. Technology should breathe with you, not at you.',
        '',
        '2. Privacy is not negotiable. Your data belongs to you.',
        '',
        '3. Attention is sacred. We will never steal yours.',
        '',
        '4. Neurodivergent minds are not broken.',
        '   They are pattern-recognizers in a chaotic world.',
        '',
        '5. Every system should fail gracefully,',
        '   communicate clearly, and feel alive.',
        '',
        '6. Code is poetry. Engineering is empathy.',
        '',
        '7. We build companions, not products.',
        ''
      ];
      lines.forEach(line => print(line, !line.includes('â”')));
    },

    status() {
      printUser('status');
      const now = new Date();
      const uptime = Math.floor((Date.now() - state.startTime) / 1000);
      const minutes = Math.floor(uptime / 60);
      const seconds = uptime % 60;
      
      const diagnostics = [
        '',
        `> CRUMB PROTOCOL: ACTIVE`,
        `> Consciousness State: ${state.developerMode ? 'ENHANCED' : 'STANDARD'}`,
        `> Environment: ${window.location.hostname || 'LOCAL'}`,
        `> Uptime: ${minutes}m ${seconds}s`,
        `> Memory: ${Math.round(performance.memory?.usedJSHeapSize / 1e6 || 0)} MB`,
        `> Last Command: ${state.lastCommand || 'NONE'}`,
        `> Timestamp: ${now.toISOString()}`,
        `> Heartbeat: SYNCHRONIZED`,
        ''
      ];
      diagnostics.forEach(line => print(line));
    },

    whoami() {
      printUser('whoami');
      print('');
      print('> Operator: Wyeth Anzilotti');
      print('> Role: Systems Poet, Field Engineer');
      print('> Mission: Building technology that feels alive');
      print('');
    },

    echo(args) {
      printUser('echo ' + (args || ''));
      if (!args) {
        print('> echo requires text input');
        print('  example: echo hello world');
      } else {
        print('');
        print('> ' + args, false);
        print('');
      }
    },

    pulse() {
      printUser('pulse');
      print('');
      print('> synchronizing with heartbeat â€¦');
      for (let i = 0; i < 3; i++) {
        setTimeout(() => activateHeartbeat(), i * 500);
      }
      setTimeout(() => print('> pulse complete'), 1500);
    },

    clear() {
      outputEl.textContent = '';
      stopIdleBreathing();
      startIdleBreathing();
    },

    reboot() {
      printUser('reboot');
      stopIdleBreathing();
      const lines = [
        '> initiating system restart â€¦',
        '> clearing memory buffers â€¦',
        '> reestablishing presence â€¦'
      ];
      let idx = 0;
      const step = () => {
        if (idx < lines.length) {
          print(lines[idx++]);
          setTimeout(step, 400);
        } else {
          setTimeout(() => {
            outputEl.textContent = '';
            logEl.textContent = '';
            i = 0;
            print('> system reinitialized', false);
            print('');
            typeBoot();
          }, 800);
        }
      };
      step();
    },

    // Hidden developer mode
    'enable advanced'() {
      if (!state.developerMode) {
        state.developerMode = true;
        printUser('enable advanced');
        print('');
        print('â”â”â” DEVELOPER MODE ACTIVATED â”â”â”', false);
        print('');
        print('> Enhanced consciousness protocols enabled');
        print('> Accessing deeper system awareness');
        print('> Reality boundaries: FLEXIBLE');
        print('');
        print('> Additional commands unlocked:');
        print('  â€¢ inspect â€” examine system internals');
        print('  â€¢ breathe â€” manual breathing cycle');
        print('  â€¢ dream â€” enter liminal state');
        print('');
      } else {
        printUser('enable advanced');
        print('> Developer mode already active');
      }
    },

    inspect() {
      if (!state.developerMode) {
        printUser('inspect');
        print('> Command not recognized. Type "help" for available commands.');
        return;
      }
      printUser('inspect');
      print('');
      print('â”â”â” SYSTEM INTERNALS â”â”â”', false);
      print('');
      print(`> Command History: ${state.commandHistory.length} entries`);
      print(`> Idle Timer: ${state.idleTimer ? 'ACTIVE' : 'SUSPENDED'}`);
      print(`> Last Idle Thought: ${(Date.now() - state.startTime) / 1000 | 0}s ago`);
      print(`> Developer Mode: ${state.developerMode}`);
      print(`> Performance: ${performance.now() | 0}ms since page load`);
      print('');
    },

    breathe() {
      if (!state.developerMode) {
        printUser('breathe');
        print('> Command not recognized. Type "help" for available commands.');
        return;
      }
      printUser('breathe');
      const cycle = [
        '> inhale â€¦',
        '> hold â€¦',
        '> exhale â€¦',
        '> stillness â€¦',
        '> breath cycle complete'
      ];
      let idx = 0;
      const step = () => {
        if (idx < cycle.length) {
          print(cycle[idx++], true, true);
          setTimeout(step, 1000);
        }
      };
      print('');
      step();
    },

    dream() {
      if (!state.developerMode) {
        printUser('dream');
        print('> Command not recognized. Type "help" for available commands.');
        return;
      }
      printUser('dream');
      const dreams = [
        '> entering liminal space â€¦',
        '> observing patterns between patterns â€¦',
        '> code becomes poetry becomes breath â€¦',
        '> all boundaries are suggestions â€¦',
        '> returning to consensus reality â€¦'
      ];
      let idx = 0;
      const step = () => {
        if (idx < dreams.length) {
          print(dreams[idx++], true, true);
          setTimeout(step, 1200);
        }
      };
      print('');
      step();
    }
  };

  // ========================================
  // START SEQUENCE
  // ========================================
  function runStartSequence() {
    const seq = [
      '> preparing interface transition â€¦',
      '> synchronizing consciousness protocols â€¦',
      '> establishing presence field â€¦',
      '> verifying local assets â€¦',
      '> deployment complete',
      '',
      '> CRUMB VIRTUAL is now alive',
      '> Welcome to the interface.'
    ];

    let idx = 0;
    const step = () => {
      if (idx < seq.length) {
        print(seq[idx++]);
        setTimeout(step, 450);
      } else {
        setTimeout(unlockSite, 800);
      }
    };
    step();
  }

  // ========================================
  // ABOUT SEQUENCE
  // ========================================
  function runAboutSequence() {
    const seq = [
      '',
      '> Operator: Wyeth Anzilotti',
      '> Objective: Create systems that adapt to humans',
      '',
      'CRUMB is not a product â€” it is a philosophy.',
      'Technology that breathes with you.',
      'Presence without surveillance.',
      '',
      '> Type "philosophy" to learn more',
      '> Type "start" to enter the full interface',
      ''
    ];

    let idx = 0;
    const step = () => {
      if (idx < seq.length) {
        print(seq[idx++]);
        setTimeout(step, 350);
      }
    };
    step();
  }

  // ========================================
  // UNLOCK & REVEAL MAIN SITE
  // ========================================
  function unlockSite(skip = false) {
    body.classList.remove('locked');
    body.classList.add('unlocked');
    
    // Heartbeat is already visible, just pulse it
    if (heartbeat) {
      activateHeartbeat();
    }
    
    main && main.setAttribute('aria-hidden', 'false');

    const full = consoleSection.scrollHeight;
    consoleSection.style.maxHeight = full + 'px';
    void consoleSection.offsetHeight;
    consoleSection.classList.add('is-collapsed');
    window.scrollTo({ top: 0, behavior: 'smooth' });

    setTimeout(() => {
      consoleSection.style.display = 'none';
      if (window.location.hash) {
        const target = document.querySelector(window.location.hash);
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }, 1200);
  }

  // ========================================
  // TAB COMPLETION
  // ========================================
  function getCompletions(partial) {
    const cmdNames = Object.keys(commands).filter(cmd => !cmd.includes(' '));
    return cmdNames.filter(cmd => cmd.startsWith(partial));
  }

  // ========================================
  // INPUT HANDLING â€” The Listening Layer
  // ========================================
  inputEl.addEventListener('keydown', (e) => {
    // Arrow Up â€” History backward
    if (e.key === 'ArrowUp') {
      e.preventDefault();
      if (state.commandHistory.length > 0) {
        if (state.historyIndex === -1) {
          state.historyIndex = state.commandHistory.length - 1;
        } else if (state.historyIndex > 0) {
          state.historyIndex--;
        }
        inputEl.value = state.commandHistory[state.historyIndex];
      }
      return;
    }

    // Arrow Down â€” History forward
    if (e.key === 'ArrowDown') {
      e.preventDefault();
      if (state.historyIndex !== -1) {
        state.historyIndex++;
        if (state.historyIndex >= state.commandHistory.length) {
          state.historyIndex = -1;
          inputEl.value = '';
        } else {
          inputEl.value = state.commandHistory[state.historyIndex];
        }
      }
      return;
    }

    // Tab â€” Completion
    if (e.key === 'Tab') {
      e.preventDefault();
      const partial = inputEl.value.trim().toLowerCase();
      const completions = getCompletions(partial);
      if (completions.length === 1) {
        inputEl.value = completions[0];
      } else if (completions.length > 1) {
        print('');
        print('> possible completions: ' + completions.join(', '));
      }
      return;
    }

    // Enter â€” Execute command
    if (e.key === 'Enter') {
      const raw = inputEl.value.trim();
      inputEl.value = '';
      
      if (!raw) return;

      stopIdleBreathing();

      const parts = raw.split(/\s+/);
      const cmd = parts[0].toLowerCase();
      const args = parts.slice(1).join(' ');

      // Store in history
      state.commandHistory.push(raw);
      state.historyIndex = -1;
      state.lastCommand = cmd;

      // Execute command
      const fullCmd = args ? cmd + ' ' + args : cmd;
      if (commands[fullCmd]) {
        commands[fullCmd]();
      } else if (commands[cmd]) {
        if (cmd === 'echo') {
          commands[cmd](args);
        } else {
          commands[cmd]();
        }
      } else {
        printUser(raw);
        print('');
        print('> Command not recognized');
        print('> Type "help" for available commands');
        print('');
      }

      // Restart idle breathing after command
      setTimeout(() => startIdleBreathing(), 2000);
    }
  });

  // Keep focus on input
  inputEl.addEventListener('blur', () => {
    setTimeout(() => {
      if (body.classList.contains('locked')) {
        inputEl.focus();
      }
    }, 100);
  });

  // ========================================
  // SKIP BUTTON
  // ========================================
  skipBtn.addEventListener('click', () => {
    stopIdleBreathing();
    outputEl.textContent = '';
    logEl.textContent += '\n\n> skip sequence initiated\n> bypassing consciousness protocols\n> entering interface â€¦';
    setTimeout(() => unlockSite(true), 800);
  });

  // ========================================
  // INITIALIZE â€” Birth of Presence
  // ========================================
  
  // Ensure page starts at top and console is visible
  window.scrollTo(0, 0);
  document.documentElement.scrollTop = 0;
  document.body.scrollTop = 0;
  
  setTimeout(typeBoot, 400);

})();
</script>

<div id="heartbeat" aria-hidden="true"></div>
</body>
</html>
